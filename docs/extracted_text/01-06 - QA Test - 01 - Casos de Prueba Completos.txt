CASOS DE PRUEBA (TEST CASES) — INVENTARIOConvencionesUX: pantalla origen del casoSR: regla de servicio aplicada (SR-01…SR-10)RF: requerimientos funcionales1) WIZARD DE ALTA — UX-INV-WZ-01TC-INV-001 — Alta OK con atributos obligatorios (O) completosUX: WZ S01→S04Precondiciones: catálogos activos; usuario con permisos.Pasos:Abrir wizard.Seleccionar Categoría válida.Seleccionar Subcategoría válida.Completar todos atributos O mostrados.Seleccionar Estado inicial.Seleccionar Ubicación inicial.Confirmar creación.Resultado esperado:Se crea inv_item con item_id, item_code, qr.Se crean valores inv_item_attribute_value.Se crea inv_movement tipo CREATE.Se abre ficha en modo consulta.SR: SR-01, SR-03, SR-04RF: 002/003, 010–013, 030/031, 032/033, 040–044, 011/012TC-INV-002 — Bloqueo por falta de categoríaUX: WZ S01Pasos: abrir wizard y no seleccionar categoría; intentar “Siguiente”.Resultado esperado: botón bloqueado o error “Categoría obligatoria”.SR: SR-01RF: 030, 010 02-01 - DOCUMENTO RFTC-INV-003 — Bloqueo por falta de subcategoríaUX: WZ S01Pasos: seleccionar categoría; no seleccionar subcategoría; “Siguiente”.Resultado esperado: bloqueo + mensaje “Subcategoría obligatoria”.SR: SR-01RF: 031, 010 02-01 - DOCUMENTO RFTC-INV-004 — Coherencia Cat/Subcat inválida (FK compuesta)UX: WZ S01Precondición: existe combinación inválida (por manipulación o test).Pasos: intentar forzar selección subcategoría de otra categoría (o enviar payload alterado).Resultado esperado: error “Clasificación inválida”; no avanza.SR: SR-01RF: 036TC-INV-005 — Render de ficha dinámica: NA no apareceUX: WZ S02Pasos: seleccionar una subcategoría y observar lista de atributos.Resultado esperado: atributos NA no se renderizan.SR: SR-03RF: 033/036TC-INV-006 — Condicional C inactivo: visible pero deshabilitado (Patrón C)UX: WZ S02Pasos: con valores iniciales, localizar un atributo C cuya condición aún no se cumple.Resultado esperado: campo C visible, deshabilitado, con hint normado.SR: SR-03RF: 036TC-INV-007 — Condicional C se activa al cambiar “gatillo” y pasa a obligatorioUX: WZ S02Pasos:En S02, cambiar atributo “gatillo”.Verificar que un C pasa a activo.No rellenar el C y pulsar “Siguiente”.Resultado esperado: C se habilita, aparece como obligatorio (*). Al intentar avanzar: bloqueo con error “obligatorio según características”.SR: SR-03, SR-04RF: 036TC-INV-008 — Dominio cerrado: rechazo valor fuera de listaUX: WZ S02Pasos: en un atributo tipo lista (dominio cerrado), intentar introducir/forzar valor no existente.Resultado esperado: error “valor no pertenece a lista permitida”; no permite avanzar/guardar.SR: SR-04RF: 034/035TC-INV-009 — Tipado: rechazo por tipo incorrecto (number/text/date/bool)UX: WZ S02Pasos: en un atributo numérico introducir texto (o viceversa).Resultado esperado: error de tipo; bloqueo de avance.SR: SR-04RF: 032/036TC-INV-010 — Paso 3: bloqueo por falta de estado inicialUX: WZ S03Pasos: dejar estado vacío; seleccionar ubicación; “Siguiente”.Resultado esperado: bloqueo + “Estado obligatorio”.SR: SR-01RF: 020/021 02-01 - DOCUMENTO RFTC-INV-011 — Paso 3: bloqueo por falta de ubicación inicialUX: WZ S03Pasos: seleccionar estado; dejar ubicación vacía; “Siguiente”.Resultado esperado: bloqueo + “Ubicación obligatoria”.SR: SR-01RF: 040/042TC-INV-012 — Confirmación final: validación completa y creación atómicaUX: WZ S04Pasos: completar wizard, en confirmación forzar un error final (p.ej. quitar un obligatorio con manipulación).Resultado esperado: no se crea inv_item; no hay movimientos; se muestran errores.SR: SR-01, SR-04RF: 002/003, 033/036, 040–0442) FICHA DE PIEZA — UX-INV-FICHA-01TC-INV-020 — Consulta ficha completa por QR/códigoUX: FICHA ConsultaPrecondición: existe pieza creada.Pasos: buscar por QR o código.Resultado esperado: se muestran núcleo + atributos + reglas efectivas + historial paginado.SR: SR-10, SR-03RF: 013, 036, 043/044TC-INV-021 — En consulta: C inactivo visible y marcado “no aplicable actualmente”UX: FICHA ConsultaPasos: abrir pieza donde exista algún C inactivo.Resultado esperado: C visible, deshabilitado, con nota estándar.SR: SR-03RF: 036TC-INV-022 — En consulta: NA no apareceUX: FICHA ConsultaPasos: abrir ficha; verificar que atributos NA no se muestran.Resultado esperado: NA ausentes.SR: SR-03RF: 033/036TC-INV-023 — Edición: solo bloque “Características” editableUX: FICHA EdiciónPasos: entrar en “Editar ficha”.Resultado esperado: identificación/clasificación/estado/ubicación no editables; solo atributos.SR: SR-04RF: 032–036, 041 (no cambio directo estado/ubicación)TC-INV-024 — Guardar edición OK (OP y O) respetando tipado/dominioUX: FICHA EdiciónPasos: modificar campos válidos; guardar.Resultado esperado: valores persistidos; mensaje éxito; vuelve a consulta.SR: SR-04RF: 032–036TC-INV-025 — Edición: activar un C y bloquear guardado si queda vacíoUX: FICHA EdiciónPasos: cambiar “gatillo” para activar C; no rellenar C; guardar.Resultado esperado: bloqueo + error en C.SR: SR-03, SR-04RF: 036TC-INV-026 — Edición: intentar editar C inactivo (debe impedirse)UX: FICHA EdiciónPasos: localizar un C inactivo; intentar editar.Resultado esperado: campo deshabilitado; mensaje “no editable en estado actual”.SR: SR-03RF: 036TC-INV-027 — Edición: introducir valor fuera de dominioUX: FICHA EdiciónPasos: atributo lista; forzar valor inválido.Resultado esperado: error dominio; no guarda.SR: SR-04RF: 034/0353) MOVIMIENTOS — UX-INV-MOV-01-*TC-INV-040 — Movimiento genérico OK: cambio de ubicación con motivoUX: MOV-01-APasos:Abrir “Cambiar estado/ubicación”.Seleccionar tipo “Transferencia”.Seleccionar ubicación destino distinta.Introducir motivo.Confirmar.Resultado esperado: inv_movement creado; inv_item.location_id actualizado; historial refleja evento.SR: SR-06RF: 040–044, 042TC-INV-041 — Movimiento genérico OK: cambio de estado con motivoUX: MOV-01-APasos: tipo “Cambio estado”; seleccionar estado destino ≠ actual; motivo; confirmar.Resultado esperado: movimiento + actualización de estado.SR: SR-06RF: 020–024, 040–044, 042TC-INV-042 — Bloqueo: movimiento sin motivoUX: MOV-01-APasos: seleccionar destino pero dejar motivo vacío; confirmar.Resultado esperado: bloqueo + error “Motivo obligatorio”.SR: SR-06RF: 042TC-INV-043 — Bloqueo: movimiento no cambia nada (mismo estado/ubicación)UX: MOV-01-APasos: elegir mismo estado y misma ubicación; confirmar.Resultado esperado: bloqueo con error “el movimiento debe cambiar estado o ubicación”.SR: SR-06RF: 040–042TC-INV-044 — Concurrencia: “from” no coincide (snapshot cambió)UX: MOV-01-APrecondición: dos usuarios abren la misma pieza.Pasos:Usuario A realiza un movimiento y confirma.Usuario B intenta confirmar movimiento basado en snapshot antiguo.Resultado esperado: error de concurrencia; no se guarda; pide recargar ficha.SR: SR-06RF: 041/042 (control de coherencia)TC-INV-050 — Apartar OK: crea reserva activa + movimiento + estado reservadoUX: MOV-01-BPasos: apartar; seleccionar cliente; fijar caducidad; confirmar.Resultado esperado: inv_reservation ACTIVE; movimiento RESERVE; estado a reservado; visible en ficha.SR: SR-07, SR-06RF: 050–055, 040–044TC-INV-051 — Bloqueo: apartar sin clienteUX: MOV-01-BPasos: intentar confirmar sin cliente.Resultado esperado: bloqueo + “Cliente obligatorio”.SR: SR-07RF: 050–055TC-INV-052 — Bloqueo: reserva activa existente (unicidad activa)UX: MOV-01-BPrecondición: pieza ya reservada activamente.Pasos: intentar apartar de nuevo.Resultado esperado: error; muestra reserva existente; no crea una nueva.SR: SR-07RF: 050–055TC-INV-053 — Liberar reserva OK: cierra reserva + movimiento + estado disponibleUX: MOV-01-CPrecondición: reserva activa existente.Pasos: liberar; motivo; confirmar.Resultado esperado: reserva pasa a cerrada; movimiento UNRESERVE; estado vuelve a disponible.SR: SR-07, SR-06RF: 050–055, 040–044TC-INV-060 — Enviar a taller OK: orden + movimiento + estado/ubicación tallerUX: MOV-01-DPasos: enviar; seleccionar taller; describir trabajo; confirmar.Resultado esperado: inv_repair_order OPEN; movimiento SEND_TO_WORKSHOP; estado IN_REPAIR; ubicación EXTERNAL_WORKSHOP.SR: SR-08, SR-06RF: 060–064, 040–044TC-INV-061 — Bloqueo: enviar a taller sin tallerUX: MOV-01-DPasos: intentar confirmar sin taller.Resultado esperado: bloqueo “Taller obligatorio”.SR: SR-08RF: 060–064TC-INV-062 — Recepción de taller OK: cierre/actualización orden + movimiento retornoUX: MOV-01-EPrecondición: pieza con orden activa enviada.Pasos: recibir; seleccionar resultado; confirmar.Resultado esperado: inv_repair_order actualizado a RECEIVED/CLOSED; movimiento RETURN_FROM_WORKSHOP; estado/ubicación retornan según política.SR: SR-08, SR-06RF: 060–064, 040–044TC-INV-070 — Impresión etiqueta OK: log de impresión creado con snapshotUX: Acción “Imprimir etiqueta”Pasos: imprimir etiqueta desde ficha.Resultado esperado: registro inv_label_print_log action=print con snapshot; impresión lanzada.SR: SR-09RF: 090–092TC-INV-071 — Reimpresión: requiere motivo (si aplica) y crea log reprintUX: Acción “Reimprimir etiqueta”Pasos: reimprimir; introducir motivo; confirmar.Resultado esperado: log action=reprint con motivo.SR: SR-09RF: 090–092Entregable A12 cerrado✅ Wizard (alta) — cobertura completa de clasificación, ficha dinámica, validaciones, creación atómica✅ Ficha — consulta/edición alineada con patrón C✅ Movimientos — estado/ubicación solo por evento + reserva + taller + etiquetas
