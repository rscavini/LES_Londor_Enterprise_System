FRaD · Módulo Inventario (Fase 1) · LONDORDocumento de Requisitos de Arquitectura Funcional (FRaD)Versión: v1.0 (compilación de validaciones con Stakeholders)Ámbito3 joyerías LONDOR (multi-tienda, datos compartidos en la nube)RolesAdministrador, DependientaMódulos relacionadosCaja, Venta Directa, Apartados/Encargos, Reparaciones, Garantías, Facturación (compra/venta)PrioridadInventario (módulo troncal)1. Objetivo y rol del móduloObjetivo general: implantar un Inventario troncal, compartido entre tiendas, que gobierne el ciclo de vida de cada pieza y garantice integridad, trazabilidad y coherencia con los procesos de Venta, Caja, Apartados/Encargos, Reparaciones, Garantías y Facturación.Validación Stakeholders: el Inventario se define como el sistema troncal que gobierna ventas, caja, reparaciones y garantías.2. Alcance del módulo (IN / OUT)2.1. Alcance IN (gestiona Inventario)Piezas nuevasPiezas de segunda manoPiezas de recompraPiezas reservadas (apartados)Piezas en reparación/personalizaciónPiezas bloqueadas por incidenciaPiezas en tránsito entre tiendasExtensibilidad: se incorpora una tabla auxiliar de Tipos de pieza para crear nuevos tipos sin modificar el núcleo del sistema.2.2. Alcance OUT (conectado pero no gestionado directamente)Cálculo fiscal e impuestosContabilidadGestión de cobros/pagos (Caja) como módulo propioEmisión de documentos legales (Facturación) como módulo propio3. Principios de gobierno del datoUna pieza nace una vez (ID único) y se reutiliza en todos los módulos.Trazabilidad obligatoria por movimiento (quién, cuándo, dónde, por qué).Estados y clasificaciones configurables mediante tablas auxiliares (evitar silos y hardcode).Separación entre: estado operativo de inventario y asignación comercial (reserva/venta) cuando aplique.4. Entidad troncal: Pieza (Inventory Item)Validación Stakeholders: cada pieza es única y se identifica mediante Código + QR, derivados del ID individual.4.1. IdentificaciónID único interno (ItemId) no reutilizable.Código visible (ItemCode) generado automáticamente o por regla de negocio (parametrizable).QR automático derivado del ItemId/ItemCode para escaneo en tienda y trazabilidad.4.2. Campos mínimos recomendados (MVP funcional)GrupoCampoNotasIdentificaciónItemId / ItemCode / QRValueObligatorioClasificaciónCategoryId / SubcategoryIdObligatorio; gobierna ficha dinámicaEstado y ubicaciónOperationalStatusId / LocationIdUbicación obligatoria siempreAsignación comercialCustomerId (opcional) + AssignmentTypeReserva/ventaDocumentosSaleId / ReservationId / WorkshopOrderId (opcionales)Asociación según eventoTrazabilidadCreatedAt/By, UpdatedAt/ByObligatorio5. Estados operativos y control de ciclo de vidaLos estados operativos describen qué le pasa físicamente a la pieza y su disponibilidad operativa. Son configurables mediante tabla auxiliar.5.1. Estados operativos validados y extendidosEstados validados por Stakeholders: Controlada, Disponible, Reservada/Apartada, Vendida, En reparación, En tránsito, Bloqueada, Ajuste/regularización.Validación adicional: se incorpora el estado operativo "Lista para entrega" y se confirma el estado final "Vendida (cerrada)".Estado operativoDefinición / reglas claveControladaPieza registrada y verificada; lista para operar. Puede evolucionar a Disponible.DisponiblePieza vendible/asignable; sin bloqueo comercial activo.Reservada/ApartadaPieza bloqueada por apartado; asociada a un cliente y fecha de vencimiento.Lista para entregaVenta registrada para un cliente, pero pendiente de entrega (p. ej., preparación, verificación). No vendible a terceros.En reparación/personalizaciónPieza en proceso de taller; ubicación habitual: Taller externo. Puede tener venta asociada.En tránsitoPieza en transferencia logística entre ubicaciones.BloqueadaPieza inmovilizada por incidencia; requiere rol Administrador para desbloqueo.Ajuste/regularizaciónEstado transitorio para inventario físico/regularizaciones (solo Administrador).Vendida (cerrada)Salida definitiva del stock tras entrega al cliente. Mantiene histórico para garantías/devoluciones.5.2. Caso de uso crítico: venta + personalización en tallerCaso validado: una pieza puede estar vendida comercialmente para un cliente y, a la vez, estar en taller para pulido/grabado/personalización. Regla: la venta (SaleId + CustomerId) bloquea comercialmente la pieza; el estado operativo refleja el proceso físico (En reparación/personalización o En tránsito). La entrega final al cliente cambia el estado operativo a "Vendida (cerrada)".6. Ubicaciones (Location)Validación Stakeholders: la ubicación es obligatoria siempre.Ubicaciones a controlar en Fase 1:Tienda LONDOR DiputaciónTienda LONDOR ProvenzaAlmacénTaller externo6.1. Tabla auxiliar y ventana CRUDTabla auxiliar Locations + ventana CRUD de gestión integral (alta/baja lógica, edición, tipo de ubicación, contacto/dirección, activa/inactiva).7. Movimientos obligatorios y trazabilidadValidación Stakeholders: todos los eventos generan movimiento de inventario y todo movimiento deja historial.Alta de piezaVentaApartado (crear) / Liberación de apartadoEnvío a reparación/personalizaciónRecepción/cierre de reparaciónTransferencia entre tiendasAjuste por inventario físico (regularización)Devolución / Abono7.1. Trazabilidad obligatoria del movimientoCampos obligatorios por movimiento: Usuario, Fecha/hora, Tienda/ubicación origen, Motivo.Documento asociado: se indicó como opcional. Recomendación de gobierno: configurar obligatoriedad por tipo de movimiento (p. ej., venta, devolución y reparación deberían enlazar a un identificador de documento interno).8. Roles y permisos (multiusuario)Se implementa control de autenticación multiusuario con roles y permisos. Se incluye tabla auxiliar y ventana CRUD/matriz de permisos.8.1. Rol Dependienta (permisos validados)Consultar inventario (con restricción de campos; por definir)Vender piezas disponiblesCrear apartadosEnviar a reparación/personalizaciónCambiar ubicación de una piezaNo puede ajustar inventario.8.2. Rol Administrador (permisos validados)Todas las acciones de DependientaAjustes y regularizacionesDesbloqueosAutorizar excepciones (p. ej., venta fuera de reglas estándar)8.3. Reglas específicas: venta de pieza reservadaValidación: una pieza reservada solo puede venderse por Dependienta si el cliente de la venta coincide con el cliente de la reserva. En caso contrario: requiere liberación de reserva o autorización manual de Administrador.9. Apartados caducados (bandeja de decisión)Validación: el apartado bloquea la pieza. Si caduca, la decisión es manual por Administrador y debe documentarse el motivo.Se implementa:Tabla de Reservas/Apartados con fecha de vencimiento, estado (activa/caducada/resuelta) y campos de resolución.Ventana “Bandeja de Apartados Caducados” (solo Admin) para decidir: volver a Disponible, pasar a Bloqueada o extender reserva (si se habilita).Campo “Motivo de decisión” obligatorio.10. Reparaciones y personalizaciones (taller externo)Validación: al enviar a reparación/personalización, la pieza sale de la tienda (ubicación: Taller externo) y el movimiento queda registrado.Validación: se permite vender piezas en reparación (Admin y Dependienta), sujeto a las reglas de asignación a cliente.Se implementa:CRUD Talleres (entidad Workshop)CRUD Órdenes de taller (WorkshopOrder) con estados de orden y tipos de reparación/personalizaciónAsociación Orden de taller ↔ Pieza(s), con trazabilidad y fechas11. GarantíasValidación: la garantía se asocia a pieza y a venta. El inicio de la garantía es la fecha de venta.Se implementa:CRUD Políticas de garantía (WarrantyPolicy)Gestión de garantías (consulta/alta automática al vender)Opcional: gestión de reclamaciones (WarrantyClaim)12. Facturación (conexión preparada)Validación: las ventas generan factura solo a veces (en otros casos ticket).Validación: la entrada en inventario por compras se realiza después de la factura.Implicaciones funcionales para Inventario:Movimientos de entrada por compra deben referenciar el documento de compra/factura antes de activar la pieza como Controlada/Disponible.Ventas pueden generar ticket o factura: Inventario debe enlazar el identificador del documento emitido cuando exista.13. Clasificación de piezas: categorías, subcategorías, atributos y dominiosEstructura general validada: Categoría = tipo general de joya (p. ej., Anillos). Subcategoría = tipología específica dentro de la categoría (p. ej., Solitario, Alianza).La ficha de la pieza es dinámica: los atributos visibles/obligatorios dependen de la subcategoría.13.1. DefinicionesConceptoDefiniciónCategoríaClasificación general del tipo de joya (p. ej., Anillos, Pendientes, Colgantes).SubcategoríaSubtipo dentro de la categoría que define tipología comercial/diseño (p. ej., Solitario, Alianza, Rosetón).AtributoCaracterística posible en abstracto (p. ej., Material, Color, Talla, Quilataje).Atributo por subcategoríaAsignación de atributos a una subcategoría, indicando obligatoriedad, orden y reglas de validación.Dominio de atributoForma y reglas de captura del atributo (lista controlada, rango, texto libre, booleano).Valores de dominioOpciones concretas de un dominio (p. ej., Material: Oro 18k, Plata 925).13.2. Entidades auxiliares y CRUDSe incorporan CRUD de gestión integral para:Categorías y Subcategorías (y su asociación)Atributos (catálogo)Atributos por subcategoría (qué campos aparecen en cada ficha; obligatorios/condicionales)Dominios de atributos y Valores de dominio (colores, materiales, acabados, etc.)Agrupaciones de joyas (sets/bundles; p. ej., colgante + cadena = gargantilla)13.3. Agrupaciones de joyas (bundle/set)Funcionalidad: permitir definir agrupaciones de piezas bajo una entidad “Grupo”, con miembros y roles dentro del grupo.Ejemplo: Gargantilla = Cadena + Colgante.Se implementa CRUD de Grupos y de miembros de grupo. Reglas de venta: configurable (vender conjunto implica vender miembros).14. Ventanas CRUD requeridas y prioridad de entrega (Demo)Prioridades validadas y consolidadas:14.1. Prioridad P1 (núcleo Inventario + gobierno)CRUD de Gestión Integral de Inventario (búsqueda, filtros, ficha, historial, acciones)CRUD de tablas/entidades auxiliares (Tipos, Estados, Ubicaciones, Clasificación, Atributos, Dominios)Gestión de roles y permisos (matriz)Dashboard de Gestión de Administrador14.2. Prioridad P2 (entidades/módulos asociados a Inventario)CRUD Impresión/reimpresión de etiquetas (barcode + QR automático + descripción)CRUD Clientes (asociado a ventas, apartados y encargos)CRUD TalleresCRUD Proveedores15. Dashboard Administrador (ventana de control)Objetivo: control operativo diario y colas de decisión.Stock por tiendaStock por estadoPiezas en reparación/personalización (por taller y antigüedad)Total piezas apartadas (activas y caducadas)Bandeja de apartados caducados pendiente de decisiónAlertas: tránsito prolongado, reparación fuera de plazo, bloqueos sin resolver16. Requerimientos no funcionales mínimos (Fase 1)Multi-tienda y multiusuario con autenticación y roles.Base de datos común en la nube con control de acceso por usuario.Trazabilidad de movimientos (auditoría).Rendimiento: búsqueda de inventario ágil con filtros.Seguridad: campos sensibles visibles solo para roles autorizados.ANEXO A · Ejemplo de clasificación: Categoría “Anillos”Este anexo sirve como ejemplo de cómo se configura una categoría, sus subcategorías, atributos y dominios, y cómo se ve en la ficha dinámica de una pieza.A.1. Categoría y subcategoríasCategoría: AnillosSubcategorías (ejemplos): Solitario, Alianza, Media alianza, Rosetón, Sello.A.2. Atributos comunes a todos los anillosAtributoTipo/DominioReglaMaterial principalLista (dominio Material)ObligatorioColor del metalLista (dominio Color metal)ObligatorioTallaNúmeroObligatorioPesoNúmero (g)OpcionalAnchura del aroNúmero (mm)OpcionalAcabadoLista (dominio Acabado)OpcionalGrabadoBooleano (Sí/No)OpcionalTexto grabadoTexto (condicional: solo si Grabado = Sí)CondicionalA.3. Atributos específicos por subcategoría (ejemplos)Solitario (además de los comunes): Tipo de piedra, Quilataje, Forma de la piedra, Color de la piedra, Pureza, Tipo de engaste.Alianza: Tipo de alianza, Piedras (Sí/No) + (si Sí) Número de piedras y Quilataje total.Rosetón: Piedra central + quilataje, número de piedras secundarias, quilataje total, forma del rosetón, tipo de engaste.Sello: Superficie grabable, motivo, relieve.A.4. Dominios y valores (ejemplos)DominioValores de dominio (ejemplos)MaterialOro 18k; Oro 14k; Plata 925; PlatinoColor metalAmarillo; Blanco; RosaAcabadoBrillo; Mate; SatinadoTipo de piedraDiamante; Zafiro; Rubí; EsmeraldaForma piedraBrillante; Princesa; Oval; PeraEngasteGarras; Bisel; InvisibleA.5. Ejemplo de ficha dinámica (Anillo · Solitario)Al seleccionar Categoría=Anillos y Subcategoría=Solitario, la ficha muestra los atributos comunes + los específicos del solitario.Ejemplo de valores en una pieza concreta: Material=Oro 18k, Color metal=Blanco, Talla=14, Tipo de piedra=Diamante, Quilataje=0.50, Engaste=Garras, Grabado=Sí, Texto="A&C 2026".
